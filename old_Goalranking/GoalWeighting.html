{{ block title }}
    Goal weighting
{{ endblock }}


{{ block content }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>

    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            border: 0;
        }
        td {
            width: calc(100% / 8);
            border: 0;
            text-align: center;
        }

        table {
            width: 100%;
            border: 0;
            border-collapse: collapse;
        }
        td {
            width: calc(100% / 8);
            border: 0;
            text-align: center;
        }
    </style>

    <p> Please rate how important the following goals are to you.
        There are up to 18 points to allocate.
        Objectives cannot be rated with more than 5 points.</p>




    <table>
        <tr>
            <td>
                <!-- Slider for goals-->
               <u><b>Sum</b></u>: <p id="total_value"></p><br>


                {{first_goal}}<br>   <input type="range" name="first_goal_rank" min="1" max="5" value="1" oninput="updateDescription(this)">
                <span id="first_goal_rank_value">1</span>
                <br><br>

                {{second_goal}}<br>   <input type="range" name="second_goal_rank" min="1" max="5" value="1" oninput="updateDescription(this)">
                <span id="second_goal_rank_value">1</span>
                <br><br>

                {{third_goal}}<br>   <input type="range" name="third_goal_rank" min="1" max="5" value="1" oninput="updateDescription(this)">
                <span id="third_goal_rank_value">1</span>
                <br><br>

                {{fourth_goal}}<br>  <input type="range" name="fourth_goal_rank" min="1" max="5" value="1" oninput="updateDescription(this)">
                <span id="fourth_goal_rank_value">1</span><br>
                <br><br>

                {{fifth_goal}}<br>   <input type="range" name="fifth_goal_rank" min="1" max="5" value="1" oninput="updateDescription(this)">
                <span id="fifth_goal_rank_value">1</span><br>



            </td>
            <td>
                 <!-- Container für den RadarChart -->
                <div id="radarChartContainer" style="max-width: 50%; width: 400px;">
                    <!-- Canvas für den RadarChart -->
                    <canvas id="myRadarChart" width="400" height="400"></canvas>
                </div>
            </td>
        </tr>
    </table>


    <br>


    <!-- Skript für die Aktualisierung der Gesamtsumme und das Erstellen des RadarCharts -->
    <script>
        // Funktion zur Aktualisierung der Beschreibung und zum Erstellen des RadarCharts
        function updateDescription(input) {
            let value = parseInt(input.value);
            let spanId = input.name + "_value";
            document.getElementById(spanId).innerText = value;

            let total = 0;
            let sliders = document.querySelectorAll('input[type="range"]');
            sliders.forEach(slider => {
                total += parseInt(slider.value);
            });

            document.getElementById('total_value').innerText = `${total}`;

            // Aufrufen der Funktion zur Radarcharterstellung
            createRadarChart(total);
        }

        // Funktion zum Erstellen des RadarCharts
        function createRadarChart(total) {
            let ctx = document.getElementById('myRadarChart').getContext('2d');
            let myRadarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: [js_vars.first_goal_js, js_vars.second_goal_js, js_vars.third_goal_js,
                             js_vars.fourth_goal_js, js_vars.fifth_goal_js],
                    datasets: [{
                        label: 'Goals',
                        data: [
                               parseInt(document.querySelector('input[name="first_goal_rank"]').value),
                               parseInt(document.querySelector('input[name="second_goal_rank"]').value),
                               parseInt(document.querySelector('input[name="third_goal_rank"]').value),
                               parseInt(document.querySelector('input[name="fourth_goal_rank"]').value),
                               parseInt(document.querySelector('input[name="fifth_goal_rank"]').value)
                               ],
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    scale: {
                        ticks: {
                            beginAtZero: true,
                            max: 5
                        }
                    }
                }
            });
        }

        // Initiales Erstellen des RadarCharts
        createRadarChart(5);
    </script>

    <br>

    {{ next_button }}


{{ endblock }}


